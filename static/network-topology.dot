digraph network {
  // Graph styling
  rankdir=BT;
  node [shape=box, style=filled, fillcolor=white, fontname="Helvetica"];
  edge [color=navy, fontname="Helvetica"];

  // Subgraphs for VLANs
  subgraph cluster_routers {
    label="Router Cluster";
    fillcolor="#ff000089"; style=filled;
    opnsense [label="OPNSense\n10.10.10.1\nPort: igc0 (WAN), igc1 (LAN)", fillcolor="#ff0000e4", shape="cylinder"];
  }
  subgraph cluster_switches {
    label="Switch Cluster (VLAN1, 10.10.10.0/24)";
    fillcolor=lightgreen; style=filled;
    switch [label="TP-Link TL-SG605E\nIGMP Snooping\n10.10.10.2\nLink: eth0 (Trunk)", fillcolor=green];
  }
  subgraph cluster_opnsense {
    label="Direct Connections to OPNSense";
    fillcolor=lightyellow; style=filled;
    #switch [label="TP-Link TL-SG605E\nIGMP Snooping\n10.10.10.2\nLink: eth0 (Trunk)", fillcolor=green];
    opnsense [label="OPNSense\n10.10.10.1\nLink: igc0(WAN)", fillcolor="#ff0000e4", shape="cylinder"];
    pc_vilde [label="PC\n10.10.90.100\ngildedCage.opnsense\nMAC: d8:80:83:80:9b:33\nLink: eth0", fillcolor="yellow"];
  }
  subgraph cluster_switch{
    label="VLANs for TL-SG605E 10GB Switch";
    vlan10_gateway [label="OPNSense VLAN10\n10.10.20.1", labeljust=1, fillcolor="#ff0000e4", shape="cylinder"];
    vlan20_gateway [label="OPNSense VLAN20\n10.10.30.1", labeljust=1, fillcolor="#ff0000e4", shape="cylinder"];
    vlan40_gateway [label="OPNSense VLAN40\n10.10.40.1", labeljust=1, fillcolor="#ff0000e4", shape="cylinder"];
    vlan60_gateway [label="OPNSense VLAN60\n10.10.60.1", labeljust=1, fillcolor="#ff0000e4", shape="cylinder"];
    fillcolor=lightgreen; style=filled;
  }
  subgraph cluster_vlan20 {
    label="VLAN20 (10.10.30.0/24, pc-vilde.iptv)";
    fillcolor=lightyellow; style=filled;
    iptv [label="Arris1113 IPTV Box\n10.10.30.50\narris.iptv\nMAC: d4:04:cd:fa:a4:11\nLink: eth0", fillcolor="lightblue"];
  }

  subgraph cluster_vlan40 {
    label="VLAN40 (10.10.40.0/24, asus)";
    fillcolor=lightyellow; style=filled;
    asus_ap [label="ASUS EA-AC87 (5G)\n10.10.40.2\nea87.asus\nPorts:\n 1 (Switch)\n3 (Printer)\n", fillcolor="#0000ffbc", shape="ellipse"];
    pc [label="VildePC (WiFi)\n10.10.40.10\ngildedCage.asus\nMAC: d8:80:83:80:9b:33", fillcolor="yellow"];
    printer [label="Printer\n10.10.40.51\nprinter.asus\nmDNS Enabled\nMAC: ec:8e:b5:bc:c8:91", fillcolor="lightblue"];
    laptop [label="Laptop\nDHCP\nkood-laptop.asus\nMAC: f8:a2:d6:c9:d2:a7", fillcolor="yellow"];
    up_laptop [label="UP Laptop\nDHCP\nursula.asus\nMAC: c6:81:9d:04:62:00", fillcolor="yellow"];
  }
  subgraph cluster_vlan60{
    label="VLAN60 (TBA, proxmox.temp)";
    fillcolor=lightyellow; style=filled;
    cisco_886vaw [label="Cisco 886VAW\nCluster Switch\nL2\nLink: FastEth4", fillcolor=green];
    sr_350 [label="SR-350 Xeon Server\n10.10.10.3\nsr-350.proxmox\nMAC: XXXX\nLink: eno1", fillcolor="yellow"];
    hp_z2_g4 [label="HP Z2-G4 Xeon Server\n10.10.10.2\nz2-g4.proxmox\nMAC: XXXX\nLink: eno1", fillcolor="yellow"];
    ms_01 [label="MS-01 Proxmox\n10.10.100.10\nms-01.proxmox\nMAC: 58:47:ca:7f:76:07\nLink: enp88s0", fillcolor="yellow"];
  
  }
  subgraph cluster_vlan10 {
    label="VLAN10 (10.10.40.0/24, iot)";
    fillcolor=lightpink; style=filled;
  }

  // External connections
  ont [label="Huawei HG683 ONT\n176.46.122.81/20\nfe80::62be:b4ff:fe24:b332/64 ", shape=ellipse, fillcolor="#ff7b00"];
  internet [label="Internet", shape="cloud", fillcolor="#808080a6"];
  wireguard [label="Wireguard VPN\n10.10.50.0/24", shape=ellipse, fillcolor="#ff7b00"];
  // Connections
  internet -> ont []
  internet -> wireguard [];
  wireguard -> ont[label=<<b>WireGuard VPN</b>>]
  ont -> opnsense [label=<<b>WAN via Port 1 to igc0</b>>];
  opnsense -> switch [label=<<b>Ethernet via igc1(eth1)</b>>];
  opnsense -> pc_vilde[label=<<b>2.5GbE via igc2(eth2)</b>>];
  opnsense -> ms_01[label=<<b>2.5GbE via igc3(eth3)</b>>];

  vlan20_gateway -> iptv[label="VLAN20 Untagged"];
  switch -> vlan10_gateway [label=<<b>eth2: VLAN10 Untagged</b>> style=dashed];
  switch -> vlan20_gateway [label=<<b>eth3: VLAN20 Untagged</b>> style=dashed];
  switch -> vlan40_gateway [label=<<b>eth5: VLAN40 Untagged</b>> style=dashed];
  switch -> vlan60_gateway [label=<<b>eth4: VLAN60 Untagged</b>> style=dashed];
  cisco_886vaw -> sr_350 [label=<<b>Ethernet</b>>];
  cisco_886vaw -> hp_z2_g4 [label=<<b>Ethernet</b>>];
  cisco_886vaw -> ms_01 [label=<<b>Ethernet</b>>];
  vlan40_gateway -> asus_ap [label=""];
  vlan60_gateway -> cisco_886vaw;
  asus_ap -> pc [label="WiFi"];
  asus_ap -> printer [label="Ethernet"];
  asus_ap -> laptop [label="WiFi"];
  asus_ap -> up_laptop [label="WiFi"];
}