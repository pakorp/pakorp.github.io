import{$ as l,b as y,a0 as k,h as c,a1 as M,a2 as T,a3 as p,d as m,c as v,Y as _,Z as w,a4 as b,a5 as A,a6 as d,a7 as D,a8 as g,a9 as E,aa as C}from"./B1unPcmw.js";let a;function x(){a=void 0}function N(u){let e=null,s=c;var t;if(c){for(e=_,a===void 0&&(a=w(document.head));a!==null&&(a.nodeType!==M||a.data!==T);)a=p(a);a===null?m(!1):a=v(p(a))}c||(t=document.head.appendChild(l()));try{y(()=>u(t),k)}finally{s&&(m(!0),a=_,v(e))}}class O{anchor;#t=new Map;#s=new Map;#e=new Map;#a=!0;constructor(e,s=!0){this.anchor=e,this.#a=s}#i=()=>{var e=b;if(this.#t.has(e)){var s=this.#t.get(e),t=this.#s.get(s);if(t)A(t);else{var i=this.#e.get(s);i&&(this.#s.set(s,i.effect),this.#e.delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[r,f]of this.#t){if(this.#t.delete(r),r===e)break;const h=this.#e.get(f);h&&(d(h.effect),this.#e.delete(f))}for(const[r,f]of this.#s){if(r===s)continue;const h=()=>{if(Array.from(this.#t.values()).includes(r)){var o=document.createDocumentFragment();E(f,o),o.append(l()),this.#e.set(r,{effect:f,fragment:o})}else d(f);this.#s.delete(r)};this.#a||!t?D(f,h,!1):h()}}};#r=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[t,i]of this.#e)s.includes(t)||(d(i.effect),this.#e.delete(t))};ensure(e,s){var t=b,i=C();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(i){var r=document.createDocumentFragment(),f=l();r.append(f),this.#e.set(e,{effect:g(()=>s(f)),fragment:r})}else this.#s.set(e,g(()=>s(this.anchor)));if(this.#t.set(t,e),i){for(const[h,n]of this.#s)h===e?t.skipped_effects.delete(n):t.skipped_effects.add(n);for(const[h,n]of this.#e)h===e?t.skipped_effects.delete(n.effect):t.skipped_effects.add(n.effect);t.oncommit(this.#i),t.ondiscard(this.#r)}else c&&(this.anchor=_),this.#i()}}export{O as B,N as h,x as r};
