import{v as _,w as g,H as w,x as o,C as E,y as T,z as p,A as m,B as v,D as d,E as k,F as b,G as A,I as u,J as F,K as y,L as M,M as C,N as D,O as N,P as R,Q as x,R as O}from"./CRk5Lmla.js";let f;function S(){f=void 0}function I(c){let t=null,a=o;var e;if(o){for(t=d,f===void 0&&(f=k(document.head));f!==null&&(f.nodeType!==E||f.data!==T);)f=p(f);f===null?m(!1):f=v(p(f))}o||(e=document.head.appendChild(_()));try{g(()=>c(e),w)}finally{a&&(m(!0),f=d,v(t))}}class B{anchor;#t=new Map;#s=new Map;#e=new Map;#a=!0;constructor(t,a=!0){this.anchor=t,this.#a=a}#i=()=>{var t=b;if(this.#t.has(t)){var a=this.#t.get(t),e=this.#s.get(a);if(e)A(e);else{var s=this.#e.get(a);s&&(this.#s.set(a,s.effect),this.#e.delete(a),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),e=s.effect)}for(const[i,n]of this.#t){if(this.#t.delete(i),i===t)break;const r=this.#e.get(n);r&&(u(r.effect),this.#e.delete(n))}for(const[i,n]of this.#s){if(i===a)continue;const r=()=>{if(Array.from(this.#t.values()).includes(i)){var l=document.createDocumentFragment();M(n,l),l.append(_()),this.#e.set(i,{effect:n,fragment:l})}else u(n);this.#s.delete(i)};this.#a||!e?F(n,r,!1):r()}}};#n=t=>{this.#t.delete(t);const a=Array.from(this.#t.values());for(const[e,s]of this.#e)a.includes(e)||(u(s.effect),this.#e.delete(e))};ensure(t,a){var e=b,s=C();if(a&&!this.#s.has(t)&&!this.#e.has(t))if(s){var i=document.createDocumentFragment(),n=_();i.append(n),this.#e.set(t,{effect:y(()=>a(n)),fragment:i})}else this.#s.set(t,y(()=>a(this.anchor)));if(this.#t.set(e,t),s){for(const[r,h]of this.#s)r===t?e.skipped_effects.delete(h):e.skipped_effects.add(h);for(const[r,h]of this.#e)r===t?e.skipped_effects.delete(h.effect):e.skipped_effects.add(h.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else o&&(this.anchor=d),this.#i()}}function P(c,t,...a){var e=new B(c);g(()=>{const s=t()??null;e.ensure(s,s&&(i=>s(i,...a)))},O)}function z(c){return(t,...a)=>{var e=c(...a),s;if(o)s=d,D();else{var i=e.render().trim(),n=N(i);s=k(n),t.before(s)}const r=e.setup?.(s);R(s,s),typeof r=="function"&&x(r)}}export{B,z as c,I as h,S as r,P as s};
