const g=["en","ee"],m="PARAGLIDE_LOCALE";const h=["cookie","globalVariable","baseLocale"];globalThis.__paraglide={};let c,d=!1,w=()=>{let e;for(const o of h){if(o==="cookie")e=x();else if(o==="baseLocale")e="en";else if(o==="globalVariable"&&c!==void 0)e=c;else if(L(o)&&r.has(o)){const t=r.get(o);if(t){const a=t.getLocale();if(a instanceof Promise)continue;e=a}}if(e!==void 0){const t=$(e);return d||(c=t,d=!0,k(t,{reload:!1})),t}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};const b=e=>{window.location.reload()};let k=(e,o)=>{const t={reload:!0,...o};let a;try{a=w()}catch{}const s=[];for(const n of h)if(n==="globalVariable")c=e;else if(n==="cookie"){if(typeof document>"u"||typeof window>"u")continue;const i=`${m}=${e}; path=/; max-age=34560000`;document.cookie=i}else{if(n==="baseLocale")continue;if(L(n)&&r.has(n)){const i=r.get(n);if(i){let l=i.setLocale(e);l instanceof Promise&&(l=l.catch(p=>{throw new Error(`Custom strategy "${n}" setLocale failed.`,{cause:p})}),s.push(l))}}}const u=()=>{t.reload&&window.location&&e!==a&&b()};if(s.length)return Promise.all(s).then(()=>{u()});u()},y=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function f(e){return e?g.includes(e):!1}function $(e){if(f(e)===!1)throw new Error(`Invalid locale: ${e}. Expected one of: ${g.join(", ")}`);return e}function x(){if(typeof document>"u"||!document.cookie)return;const o=document.cookie.match(new RegExp(`(^| )${m}=([^;]+)`))?.[2];if(f(o))return o}function R(e){return E(e)}function E(e){const o=typeof e=="string"?new URL(e,y()):new URL(e),t=o.pathname.split("/").filter(Boolean);return t.length>0&&f(t[0])&&(o.pathname="/"+t.slice(1).join("/")),o}const r=new Map;function L(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}export{R as d,w as g,k as s};
